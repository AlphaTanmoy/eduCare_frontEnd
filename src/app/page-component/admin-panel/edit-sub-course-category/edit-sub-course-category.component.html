<div class="edit-sub-category-container">
  <div class="header">
    <h1>Edit Sub-Category</h1>
  </div>

  <div class="loading" *ngIf="loading">
    Loading sub-category details...
  </div>

  <div class="error" *ngIf="error">
    {{ error }}
  </div>

  <form *ngIf="!loading && !error" (ngSubmit)="onSubmit()" class="edit-form">
    <div class="form-group">
      <label for="courseName">Course Name</label>
      <input
        type="text"
        id="courseName"
        [(ngModel)]="subCategory.courseName"
        name="courseName"
        class="form-control"
        required
      >
    </div>

    <div class="form-group">
      <label for="duration">Duration</label>
      <select
        id="duration"
        [(ngModel)]="subCategory.duration"
        name="duration"
        class="form-control"
        required
      >
        <option value="DURATION_3_MONTH">3 Months</option>
        <option value="DURATION_6_MONTH">6 Months</option>
        <option value="DURATION_12_MONTH">12 Months</option>
        <option value="DURATION_24_MONTH">24 Months</option>
      </select>
    </div>

    <div class="form-group">
      <label for="module">Module Type</label>
      <select
        id="module"
        [(ngModel)]="subCategory.module"
        name="module"
        class="form-control"
        required
      >
        <option value="MODULE_TYPE_1">Module Type 1</option>
        <option value="MODULE_TYPE_2">Module Type 2</option>
        <option value="MODULE_TYPE_3">Module Type 3</option>
      </select>
    </div>

    <div class="module-details">
      <h3>Module Details</h3>
      <div class="module-detail-item" *ngFor="let module of subCategory.moduleDetails; let i = index">
        <div class="module-header">
          <h4>Module {{i + 1}}</h4>
          <button type="button" class="btn btn-danger" (click)="removeModuleDetail(i)">
            <i class="fas fa-trash"></i> Remove Module
          </button>
        </div>
        <div class="module-items">
          <div class="module-item" *ngFor="let item of module; let j = index">
            <input
              type="text"
              [(ngModel)]="subCategory.moduleDetails[i][j]"
              [name]="'moduleItem_' + i + '_' + j"
              class="form-control"
              placeholder="Enter module item"
            >
            <button type="button" class="btn btn-danger" (click)="removeModuleItem(i, j)">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <button type="button" class="btn btn-secondary" (click)="addModuleItem(i)">
            <i class="fas fa-plus"></i> Add Item
          </button>
        </div>
      </div>
      <button type="button" class="btn btn-primary" (click)="addModuleDetail()">
        <i class="fas fa-plus"></i> Add Module
      </button>
    </div>

    <div class="form-actions">
      <button type="button" class="btn btn-secondary" (click)="router.navigate(['/admin-panel/course-list'])">
        Cancel
      </button>
      <button type="submit" class="btn btn-primary">
        Save Changes
      </button>
    </div>
  </form>
</div>
